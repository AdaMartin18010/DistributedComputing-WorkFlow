# P4-çŸ¥è¯†å›¾è°±å¯è§†åŒ–å·¥å…·æ¶æ„è®¾è®¡

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**åˆ›å»ºæ—¶é—´**ï¼š2025å¹´11æœˆ28æ—¥
**çŠ¶æ€**ï¼šğŸ”„ è®¾è®¡é˜¶æ®µ

---

## ğŸ“‹ æ¶æ„æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†çŸ¥è¯†å›¾è°±å¯è§†åŒ–å·¥å…·çš„ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€ç³»ç»Ÿæ¶æ„ã€æ•°æ®æ¨¡å‹å’ŒAPIè®¾è®¡ã€‚

---

## ğŸ¯ ç³»ç»Ÿç›®æ ‡

1. **å¯è§†åŒ–çŸ¥è¯†å›¾è°±**ï¼šæ”¯æŒå¤šç§å¯è§†åŒ–å¸ƒå±€
2. **æ¦‚å¿µæ£€ç´¢**ï¼šæ”¯æŒå¤šç§æ£€ç´¢æ–¹å¼
3. **å…³ç³»å¯¼èˆª**ï¼šæ”¯æŒå¯è§†åŒ–å…³ç³»å¯¼èˆª
4. **æ¨ç†è·¯å¾„å±•ç¤º**ï¼šæ”¯æŒæ¨ç†è·¯å¾„å¯è§†åŒ–
5. **åœ¨çº¿æ›´æ–°**ï¼šæ”¯æŒçŸ¥è¯†å›¾è°±åœ¨çº¿æ›´æ–°

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯å±‚ (Frontend)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯è§†åŒ–ç»„ä»¶   â”‚  â”‚  æ£€ç´¢ç»„ä»¶    â”‚  â”‚  äº¤äº’ç»„ä»¶    â”‚  â”‚
â”‚  â”‚  (D3.js)     â”‚  â”‚  (Search)    â”‚  â”‚  (React)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ HTTP/WebSocket
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APIå±‚ (Backend)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å›¾è°±API     â”‚  â”‚  æ£€ç´¢API     â”‚  â”‚  æ›´æ–°API     â”‚  â”‚
â”‚  â”‚  (Express)   â”‚  â”‚  (Search)    â”‚  â”‚  (Update)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®å±‚ (Data Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å›¾æ•°æ®åº“    â”‚  â”‚  æ–‡æ¡£æ•°æ®åº“   â”‚  â”‚  ç¼“å­˜å±‚      â”‚  â”‚
â”‚  â”‚  (Neo4j)     â”‚  â”‚  (MongoDB)   â”‚  â”‚  (Redis)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

**å‰ç«¯**ï¼š

- æ¡†æ¶ï¼šReact 18+
- å¯è§†åŒ–ï¼šD3.js 7+ / Cytoscape.js
- UIç»„ä»¶ï¼šAnt Design 5+
- çŠ¶æ€ç®¡ç†ï¼šRedux Toolkit
- è·¯ç”±ï¼šReact Router 6+
- HTTPå®¢æˆ·ç«¯ï¼šAxios

**åç«¯**ï¼š

- è¿è¡Œæ—¶ï¼šNode.js 18+
- æ¡†æ¶ï¼šExpress.js 4+
- å›¾æ•°æ®åº“ï¼šNeo4j 5+
- æ–‡æ¡£æ•°æ®åº“ï¼šMongoDB 7+
- ç¼“å­˜ï¼šRedis 7+
- APIæ–‡æ¡£ï¼šSwagger/OpenAPI

**éƒ¨ç½²**ï¼š

- å®¹å™¨åŒ–ï¼šDocker
- ç¼–æ’ï¼šDocker Compose
- CI/CDï¼šGitHub Actions

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### æ¦‚å¿µèŠ‚ç‚¹æ¨¡å‹

```typescript
interface ConceptNode {
  id: string;                    // æ¦‚å¿µID
  label: string;                 // æ¦‚å¿µæ ‡ç­¾
  type: string;                  // æ¦‚å¿µç±»å‹
  category: string;              // æ¦‚å¿µåˆ†ç±»
  properties: {                  // å±æ€§
    [key: string]: any;
  };
  metadata: {                    // å…ƒæ•°æ®
    createdAt: string;
    updatedAt: string;
    version: string;
    source: string;
  };
  position?: {                   // ä½ç½®ï¼ˆå¯è§†åŒ–ï¼‰
    x: number;
    y: number;
  };
  style?: {                      // æ ·å¼
    color: string;
    size: number;
    shape: string;
  };
}
```

### å…³ç³»è¾¹æ¨¡å‹

```typescript
interface RelationshipEdge {
  id: string;                    // å…³ç³»ID
  source: string;                // æºæ¦‚å¿µID
  target: string;                // ç›®æ ‡æ¦‚å¿µID
  type: string;                  // å…³ç³»ç±»å‹
  label: string;                 // å…³ç³»æ ‡ç­¾
  properties: {                  // å±æ€§
    [key: string]: any;
  };
  metadata: {                    // å…ƒæ•°æ®
    createdAt: string;
    updatedAt: string;
    version: string;
    source: string;
  };
  style?: {                      // æ ·å¼
    color: string;
    width: number;
    style: string;               // solid, dashed, dotted
  };
}
```

### çŸ¥è¯†å›¾è°±æ¨¡å‹

```typescript
interface KnowledgeGraph {
  id: string;                    // å›¾è°±ID
  name: string;                   // å›¾è°±åç§°
  version: string;                // ç‰ˆæœ¬å·
  nodes: ConceptNode[];          // èŠ‚ç‚¹åˆ—è¡¨
  edges: RelationshipEdge[];     // è¾¹åˆ—è¡¨
  metadata: {                    // å…ƒæ•°æ®
    createdAt: string;
    updatedAt: string;
    description: string;
    tags: string[];
  };
  statistics: {                  // ç»Ÿè®¡ä¿¡æ¯
    nodeCount: number;
    edgeCount: number;
    categoryCount: number;
  };
}
```

---

## ğŸ”Œ APIè®¾è®¡

### çŸ¥è¯†å›¾è°±API

#### è·å–çŸ¥è¯†å›¾è°±

```http
GET /api/knowledge-graph/:id
GET /api/knowledge-graph/:id?version=:version
```

**å“åº”**ï¼š

```json
{
  "id": "kg-001",
  "name": "é¡¹ç›®çŸ¥è¯†å›¾è°±",
  "version": "1.0.0",
  "nodes": [...],
  "edges": [...],
  "metadata": {...},
  "statistics": {...}
}
```

#### è·å–çŸ¥è¯†å›¾è°±ç‰ˆæœ¬åˆ—è¡¨

```http
GET /api/knowledge-graph/:id/versions
```

#### åˆ›å»ºçŸ¥è¯†å›¾è°±ç‰ˆæœ¬

```http
POST /api/knowledge-graph/:id/versions
```

### æ¦‚å¿µæ£€ç´¢API

#### æœç´¢æ¦‚å¿µ

```http
GET /api/concepts/search?q=:query&type=:type&category=:category
```

**å‚æ•°**ï¼š

- `q`: æœç´¢å…³é”®è¯
- `type`: æ¦‚å¿µç±»å‹ï¼ˆå¯é€‰ï¼‰
- `category`: æ¦‚å¿µåˆ†ç±»ï¼ˆå¯é€‰ï¼‰
- `limit`: ç»“æœæ•°é‡é™åˆ¶ï¼ˆé»˜è®¤20ï¼‰
- `offset`: åç§»é‡ï¼ˆé»˜è®¤0ï¼‰

**å“åº”**ï¼š

```json
{
  "total": 100,
  "offset": 0,
  "limit": 20,
  "results": [
    {
      "id": "concept-001",
      "label": "Temporal",
      "type": "æŠ€æœ¯",
      "category": "å·¥ä½œæµå¼•æ“",
      "score": 0.95
    }
  ]
}
```

#### è·å–æ¦‚å¿µè¯¦æƒ…

```http
GET /api/concepts/:id
```

#### è·å–æ¦‚å¿µå…³ç³»

```http
GET /api/concepts/:id/relationships?type=:type&direction=:direction
```

**å‚æ•°**ï¼š

- `type`: å…³ç³»ç±»å‹ï¼ˆå¯é€‰ï¼‰
- `direction`: æ–¹å‘ï¼ˆin/out/bothï¼Œé»˜è®¤bothï¼‰

### å…³ç³»å¯¼èˆªAPI

#### è·å–å…³ç³»è·¯å¾„

```http
GET /api/paths?from=:fromId&to=:toId&maxDepth=:maxDepth
```

**å‚æ•°**ï¼š

- `from`: èµ·å§‹æ¦‚å¿µID
- `to`: ç›®æ ‡æ¦‚å¿µID
- `maxDepth`: æœ€å¤§æ·±åº¦ï¼ˆé»˜è®¤5ï¼‰

**å“åº”**ï¼š

```json
{
  "paths": [
    {
      "nodes": ["concept-001", "concept-002", "concept-003"],
      "edges": ["edge-001", "edge-002"],
      "length": 2,
      "weight": 0.8
    }
  ]
}
```

### æ¨ç†è·¯å¾„API

#### è·å–æ¨ç†è·¯å¾„

```http
GET /api/reasoning-paths?from=:fromId&to=:toId&method=:method
```

**å‚æ•°**ï¼š

- `from`: èµ·å§‹æ¦‚å¿µID
- `to`: ç›®æ ‡æ¦‚å¿µID
- `method`: æ¨ç†æ–¹æ³•ï¼ˆdeductive/inductive/contradictionï¼‰

### æ›´æ–°API

#### æ›´æ–°çŸ¥è¯†å›¾è°±

```http
POST /api/knowledge-graph/:id/update
```

**è¯·æ±‚ä½“**ï¼š

```json
{
  "changes": {
    "nodes": {
      "added": [...],
      "modified": [...],
      "deleted": [...]
    },
    "edges": {
      "added": [...],
      "modified": [...],
      "deleted": [...]
    }
  }
}
```

---

## ğŸ¨ å¯è§†åŒ–è®¾è®¡

### å¸ƒå±€ç®—æ³•

1. **åŠ›å¯¼å‘å¸ƒå±€ï¼ˆForce-Directedï¼‰**
   - ä½¿ç”¨D3.jsåŠ›å¯¼å‘ç®—æ³•
   - æ”¯æŒèŠ‚ç‚¹æ’æ–¥å’Œè¾¹å¸å¼•
   - å¯è°ƒæ•´å‚æ•°

2. **å±‚æ¬¡å¸ƒå±€ï¼ˆHierarchicalï¼‰**
   - åŸºäºæ¦‚å¿µåˆ†ç±»çš„å±‚æ¬¡ç»“æ„
   - æ”¯æŒæ ‘å½¢å’ŒDAGå¸ƒå±€

3. **ç½‘ç»œå¸ƒå±€ï¼ˆNetworkï¼‰**
   - åŸºäºç¤¾åŒºæ£€æµ‹çš„å¸ƒå±€
   - æ”¯æŒæ¨¡å—åŒ–å¸ƒå±€

### äº¤äº’åŠŸèƒ½

1. **èŠ‚ç‚¹äº¤äº’**
   - ç‚¹å‡»ï¼šæ˜¾ç¤ºèŠ‚ç‚¹è¯¦æƒ…
   - æ‹–æ‹½ï¼šç§»åŠ¨èŠ‚ç‚¹ä½ç½®
   - æ‚¬åœï¼šæ˜¾ç¤ºèŠ‚ç‚¹ä¿¡æ¯
   - åŒå‡»ï¼šå±•å¼€/æŠ˜å 

2. **è¾¹äº¤äº’**
   - ç‚¹å‡»ï¼šæ˜¾ç¤ºè¾¹è¯¦æƒ…
   - æ‚¬åœï¼šé«˜äº®è·¯å¾„

3. **è§†å›¾æ§åˆ¶**
   - ç¼©æ”¾ï¼šé¼ æ ‡æ»šè½®
   - å¹³ç§»ï¼šæ‹–æ‹½èƒŒæ™¯
   - é‡ç½®ï¼šæ¢å¤åˆå§‹è§†å›¾

---

## ğŸ”’ å®‰å…¨è®¾è®¡

### è®¤è¯æˆæƒ

- JWT Tokenè®¤è¯
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- APIå¯†é’¥ç®¡ç†

### æ•°æ®å®‰å…¨

- æ•°æ®ä¼ è¾“åŠ å¯†ï¼ˆHTTPSï¼‰
- æ•°æ®å­˜å‚¨åŠ å¯†
- æ•æ„Ÿä¿¡æ¯è„±æ•

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

- è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡èŠ‚ç‚¹ï¼‰
- æŒ‰éœ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰
- ç¼“å­˜ç­–ç•¥
- é˜²æŠ–å’ŒèŠ‚æµ

### åç«¯ä¼˜åŒ–

- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- æŸ¥è¯¢ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥ï¼ˆRedisï¼‰
- åˆ†é¡µå’Œé™åˆ¶

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

- å‰ç«¯ç»„ä»¶æµ‹è¯•ï¼ˆJest + React Testing Libraryï¼‰
- åç«¯APIæµ‹è¯•ï¼ˆJest + Supertestï¼‰

### é›†æˆæµ‹è¯•

- APIé›†æˆæµ‹è¯•
- æ•°æ®åº“é›†æˆæµ‹è¯•

### E2Eæµ‹è¯•

- å¯è§†åŒ–äº¤äº’æµ‹è¯•ï¼ˆPlaywrightï¼‰

---

## å…«ã€ç›¸å…³æ–‡æ¡£

### 8.1 é¡¹ç›®å†…éƒ¨æ–‡æ¡£

#### æ ¸å¿ƒçŸ¥è¯†æ–‡æ¡£

- **[é¡¹ç›®çŸ¥è¯†å›¾è°±](../17-enhancement-plan/é¡¹ç›®çŸ¥è¯†å›¾è°±.md)** - é¡¹ç›®çŸ¥è¯†å›¾è°±ï¼Œå¯è§†åŒ–å·¥å…·çš„æ•°æ®æº
- **[å…¨å±€çŸ¥è¯†æ¦‚å¿µå…³ç³»å›¾](../17-enhancement-plan/å…¨å±€çŸ¥è¯†æ¦‚å¿µå…³ç³»å›¾.md)** - å…¨å±€çŸ¥è¯†æ¦‚å¿µå…³ç³»å›¾

#### å·¥å…·å¼€å‘è®¡åˆ’æ–‡æ¡£

- **[P4ä¼˜å…ˆçº§-å·¥å…·åŒ–å¼€å‘è®¡åˆ’](P4ä¼˜å…ˆçº§-å·¥å…·åŒ–å¼€å‘è®¡åˆ’.md)** - å·¥å…·åŒ–å¼€å‘è®¡åˆ’
- **[P4-æ¨ç†æ–¹æ³•éªŒè¯å·¥å…·-æ¶æ„è®¾è®¡](P4-æ¨ç†æ–¹æ³•éªŒè¯å·¥å…·-æ¶æ„è®¾è®¡.md)** - æ¨ç†æ–¹æ³•éªŒè¯å·¥å…·æ¶æ„è®¾è®¡

#### æ ¸å¿ƒè®ºè¯æ–‡æ¡£

- **[æŠ€æœ¯æ ˆç»„åˆè®ºè¯](../18-argumentation-enhancement/æŠ€æœ¯æ ˆç»„åˆè®ºè¯.md)** - æŠ€æœ¯æ ˆç»„åˆè®ºè¯

### 8.2 å¤–éƒ¨èµ„æºé“¾æ¥

#### Wikipediaèµ„æº

- [Knowledge graph](https://en.wikipedia.org/wiki/Knowledge_graph) - çŸ¥è¯†å›¾è°±
- [Information visualization](https://en.wikipedia.org/wiki/Information_visualization) - ä¿¡æ¯å¯è§†åŒ–
- [Graph drawing](https://en.wikipedia.org/wiki/Graph_drawing) - å›¾ç»˜åˆ¶

### 8.3 é¡¹ç›®ç®¡ç†æ–‡æ¡£

- **[Wikipediaèµ„æºå¯¹æ ‡](../../structure_control/Wikipediaèµ„æºå¯¹æ ‡.md)** - Wikipediaèµ„æºå¯¹æ ‡
- **[æ¦‚å¿µå…³è”ç½‘ç»œ](../../structure_control/æ¦‚å¿µå…³è”ç½‘ç»œ.md)** - çŸ¥è¯†å›¾è°±å¯è§†åŒ–å·¥å…·åœ¨æ¦‚å¿µå…³è”ç½‘ç»œä¸­çš„ä½ç½®

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**åˆ›å»ºæ—¶é—´**ï¼š2025å¹´11æœˆ28æ—¥
**æœ€åæ›´æ–°**ï¼š2025å¹´11æœˆ28æ—¥
**ç»´æŠ¤è€…**ï¼šé¡¹ç›®å›¢é˜Ÿ
**çŠ¶æ€**ï¼šğŸ”„ è®¾è®¡é˜¶æ®µ
